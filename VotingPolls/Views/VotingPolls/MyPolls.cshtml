@model IEnumerable<VotingPollListVM>

@{
    ViewData["Title"] = "My Polls";
}

    


<h2 class="container col-10 text-light">My voting polls</h2>
<div class="container col-10 text-light">
    <br/>
        @foreach (var votingPoll in @Model)
        {
            <div class="card text-light custom-bg-gray-dark box-shadow-light-outset mb-4">
                <div class="card-body">
                    <div class="row">
                        <div class="col">
                            <h3 class="card-title">@votingPoll.Name</h3>
                            <h3 class="card-subtitle fw-normal">@votingPoll.Question</h3>
                        </div>
                        <div class="col-auto">
                            <div class="row">
                                <div class="col">
                                    <h5 class="float-end">Date Created:</h5>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <h5 class="float-end">@votingPoll.DateCreated.ToString("dd.MM.yyyy")</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <a asp-action="Vote" asp-route-votingPollId="@votingPoll.Id" class="btn btn-outline-dark border-light border-2 fw-bold me-1" style="color:lightgray">
                            <i class="bi bi-star-fill"></i> &nbsp; Vote!</a>
                        <a asp-action="Results" asp-route-votingPollId="@votingPoll.Id" class="btn btn-outline-dark border-light border-2 fw-bold me-1" style="color:lightgray">
                            <i class="bi bi-bar-chart-fill"></i> &nbsp; Results</a>
                        <a asp-action="Delete" asp-route-votingPollId="@votingPoll.Id" class="btn btn-outline-danger border-light border-2 fw-bold me-1 float-end" style="color:lightgray">
                            <i class="bi bi-trash3-fill"></i> &nbsp; Delete</a>
                        <a asp-action="Edit" asp-route-votingPollId="@votingPoll.Id" class="btn btn-outline-dark border-light border-2 fw-bold me-1 float-end" style="color:lightgray">
                            <i class="bi bi-pencil-square"></i> &nbsp; Edit</a>



                        <button OnClick="copyToClipboard('@votingPoll.Id')" class="btn btn-outline-dark border-light border-2 fw-bold me-1" style="color:lightgray">
                                <i class="bi bi-share-fill"></i> &nbsp; Share
                        </button>
                        
                        <p hidden id="@votingPoll.Id">@votingPoll.shareURL"</p>

                    </div>
                </div>
            </div>
            
        }
</div>

@section Scripts
{
   <script type="text/javascript">

        function copyToClipboard(elementId) {

            // Create a "hidden" input
            var aux = document.createElement("input");

            // Assign it the value of the specified element
            aux.setAttribute("value", document.getElementById(elementId).innerHTML);

            // Append it to the body
            document.body.appendChild(aux);

            // Highlight its content
            aux.select();

            // Copy the highlighted text
            document.execCommand("copy");

            // Remove it from the body
            document.body.removeChild(aux);

        }
        

    </script> 
}